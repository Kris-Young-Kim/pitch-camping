# Phase 4 개발 계획: UI/UX·접근성·최적화

## 개요

Phase 4는 Pitch Travel 서비스의 사용자 경험과 접근성을 향상시키고, 성능을 최적화하는 단계입니다. SEO 최적화, 접근성 기능 구현, 그리고 남은 성능 최적화 작업을 완료합니다.

## 목표

1. **SEO 최적화 완료**: 동적 Sitemap 생성 및 404 페이지 개선
2. **성능 최적화 완료**: TourAPI 이미지 도메인 추가, 최종 성능 튜닝
3. **접근성 기능 구현**: 화면 확대/축소, 음성 출력 기능 추가
4. **디자인 개선**: 여행 테마에 맞는 UI/UX 최종 점검 및 개선

## 현재 상태

### ✅ 완료된 작업

- 시각적 브랜딩·컬러스킴 다크/라이트 모드 완벽 지원
- 이미지·지도·목록·에러·로딩 상태별 세밀한 Skeleton/스피너
- ARIA, 키보드/스크린리더 지원 등 접근성 전수 검사
- SEO: robots.txt 생성 완료
- Lighthouse 점수 80+ 달성 준비 완료 (코드 레벨 최적화 완료)
- 네비게이션 구조 개선 (GNB, LNB, SNB, FNB)
- Web Vitals 모니터링 구현
- Lighthouse 측정 가이드 작성
- 접근성 기능 계획서 작성

### ⏳ 미완료 작업

1. **404 페이지 업데이트** (`app/not-found.tsx`)
   - 현재: 캠핑 테마로 구현됨
   - 필요: 여행 테마로 업데이트 (MapPin 또는 Plane 아이콘)

2. **동적 Sitemap 업데이트** (`app/sitemap.ts`)
   - 현재: 고캠핑 API 사용 중
   - 필요: TourAPI로 변경, 여행지 상세페이지 URL 생성

3. **성능 최적화** (`next.config.ts`)
   - 현재: 고캠핑 API 이미지 도메인만 포함
   - 필요: TourAPI 이미지 도메인 추가

4. **접근성 기능 구현** (`components/accessibility/`)
   - 현재: 계획서만 작성됨
   - 필요: 화면 확대/축소, 음성 출력 기능 구현

5. **디자인 최종 점검**
   - 여행 테마에 맞는 아이콘 및 텍스트 업데이트 확인

---

## 작업 계획

### Week 1: SEO 및 성능 최적화 완료

#### 1.1 404 페이지 업데이트

**파일**: `app/not-found.tsx`

**작업 내용**:
- 캠핑 테마 아이콘 (Tent) → 여행 테마 아이콘 (MapPin 또는 Plane) 변경
- "캠핑장 검색" → "여행지 검색" 텍스트 변경
- 링크 URL 업데이트 (`/?keyword=` → 여행지 검색으로 변경)
- 여행 테마에 맞는 메시지 및 디자인 조정

**완료 기준**:
- [ ] 여행 테마 아이콘 사용
- [ ] 여행지 검색 링크 정상 동작
- [ ] 접근성 속성 유지 (aria-label, 포커스 스타일)
- [ ] 다크 모드 지원 확인

**예상 소요 시간**: 30분

---

#### 1.2 동적 Sitemap 업데이트

**파일**: `app/sitemap.ts`

**작업 내용**:
- `campingApi` → `travelApi` 변경
- `normalizeItems` → `normalizeTravelItems` 변경
- `contentId` → `contentid` 변경 (TourAPI 필드명)
- URL 경로 변경: `/campings/` → `/travels/`
- 환경변수 확인: `TOUR_API_KEY` 또는 `NEXT_PUBLIC_TOUR_API_KEY`
- Sitemap URL 업데이트: `pitch-camping` → `pitch-travel`

**완료 기준**:
- [ ] TourAPI를 통한 여행지 목록 조회
- [ ] 각 여행지 상세페이지 URL 자동 생성 (`/travels/{contentid}`)
- [ ] 정적 페이지 포함 (홈, 안전 수칙, 피드백)
- [ ] changeFrequency 및 priority 적절히 설정
- [ ] 에러 처리 및 폴백 로직 유지

**예상 소요 시간**: 1시간

**주의사항**:
- TourAPI는 대량 조회 시 Rate Limit이 있을 수 있음
- 필요시 페이지네이션 또는 배치 처리 고려
- Sitemap 크기 제한 확인 (50,000 URLs 권장)

---

#### 1.3 성능 최적화 완료

**파일**: `next.config.ts`

**작업 내용**:
- TourAPI 이미지 도메인 추가
  - 한국관광공사 이미지 서버 도메인 확인 및 추가
  - 예상 도메인: `api.visitkorea.or.kr`, `tong.visitkorea.or.kr` 등
- 이미지 최적화 설정 확인
  - WebP/AVIF 포맷 지원 확인
  - 캐싱 TTL 확인 (현재 24시간)

**완료 기준**:
- [ ] TourAPI 이미지 도메인 `remotePatterns`에 추가
- [ ] 이미지 최적화 포맷 확인 (WebP/AVIF)
- [ ] 캐싱 설정 확인 (minimumCacheTTL)
- [ ] 프로덕션 빌드 테스트

**예상 소요 시간**: 30분

**참고**:
- TourAPI 이미지 URL 구조 확인 필요
- 실제 이미지 도메인은 TourAPI 응답에서 확인 후 추가

---

### Week 2: 접근성 기능 구현

#### 2.1 접근성 도구 모음 컴포넌트

**파일**: `components/accessibility/accessibility-toolbar.tsx`

**작업 내용**:
- 플로팅 버튼 생성 (우측 하단)
- 접근성 아이콘 (Universal Access 또는 Settings)
- 클릭 시 도구 모음 패널 열기/닫기
- 접근성 속성 추가 (ARIA, 키보드 네비게이션)
- localStorage를 통한 설정 저장

**완료 기준**:
- [ ] 플로팅 버튼 UI 구현
- [ ] 패널 열기/닫기 애니메이션
- [ ] 접근성 속성 적용
- [ ] 설정 저장 기능

**예상 소요 시간**: 2시간

---

#### 2.2 화면 확대/축소 기능

**파일**: `components/accessibility/zoom-control.tsx`

**작업 내용**:
- CSS `transform: scale()` 또는 `zoom` 속성 사용
- 100%, 125%, 150%, 200% 단계별 조절
- 확대/축소 버튼 UI
- 현재 확대율 표시
- 초기화 버튼 (100%로 복원)
- 키보드 단축키 지원 (Ctrl + +, Ctrl + -)
- localStorage에 확대율 저장

**완료 기준**:
- [ ] 4단계 확대/축소 기능 구현
- [ ] 현재 확대율 표시
- [ ] 초기화 버튼 동작
- [ ] 키보드 단축키 지원
- [ ] 설정 저장 및 복원
- [ ] 레이아웃 깨짐 방지 (overflow 처리)

**예상 소요 시간**: 3시간

**기술적 고려사항**:
- `transform: scale()` 사용 권장 (더 넓은 브라우저 호환성)
- body 또는 main 요소에 적용
- 확대 시 스크롤바 처리

---

#### 2.3 음성 출력 기능

**파일**: `components/accessibility/text-to-speech.tsx`

**작업 내용**:
- Web Speech API (SpeechSynthesis) 활용
- 한국어 음성 지원 확인
- 전체 페이지 읽기 기능
- 선택 영역 읽기 기능
- 재생 컨트롤 (재생, 일시정지, 중지, 속도 조절)
- 텍스트 추출 로직 (main 요소 내 텍스트 수집)

**완료 기준**:
- [ ] 전체 페이지 읽기 기능
- [ ] 선택 영역 읽기 기능
- [ ] 재생 컨트롤 UI (재생, 일시정지, 중지)
- [ ] 읽기 속도 조절 (0.5x ~ 2.0x)
- [ ] 한국어 음성 지원 확인
- [ ] 폴백 처리 (Web Speech API 미지원 시 안내)

**예상 소요 시간**: 4시간

**기술적 고려사항**:
- Web Speech API 지원 여부 확인
- 한국어 음성 엔진 사용 가능 여부 확인
- 긴 텍스트 처리 시 메모리 관리
- 읽기 중 스크롤 자동 추적 (선택적)

---

#### 2.4 접근성 도구 모음 통합

**파일**: `app/layout.tsx`

**작업 내용**:
- `AccessibilityToolbar` 컴포넌트를 RootLayout에 추가
- 접근성 도구 모음이 모든 페이지에서 사용 가능하도록 설정

**완료 기준**:
- [ ] RootLayout에 컴포넌트 추가
- [ ] 모든 페이지에서 접근성 도구 사용 가능
- [ ] 설정 저장 및 복원 정상 동작

**예상 소요 시간**: 30분

---

### Week 3: 디자인 최종 점검 및 테스트

#### 3.1 디자인 일관성 점검

**작업 내용**:
- 여행 테마에 맞는 아이콘 및 텍스트 확인
- 캠핑 관련 용어가 남아있는지 확인
- 여행지 관련 용어로 통일
- 색상 테마 확인 (green → blue 또는 여행 테마 컬러)

**확인 파일**:
- `app/not-found.tsx` (이미 업데이트 예정)
- `components/travel-*.tsx` (이미 업데이트됨)
- 기타 컴포넌트에서 캠핑 관련 용어 확인

**완료 기준**:
- [ ] 모든 컴포넌트에서 여행 테마 용어 사용
- [ ] 아이콘 일관성 확인
- [ ] 색상 테마 일관성 확인

**예상 소요 시간**: 1시간

---

#### 3.2 접근성 테스트

**작업 내용**:
- 화면 확대/축소 기능 테스트
- 음성 출력 기능 테스트
- 키보드 네비게이션 테스트
- 스크린 리더 테스트 (NVDA 또는 JAWS)
- WCAG 2.1 AA 준수 확인

**완료 기준**:
- [ ] 모든 접근성 기능 정상 동작
- [ ] WCAG 2.1 AA 기준 충족
- [ ] 다양한 브라우저에서 테스트 완료

**예상 소요 시간**: 2시간

---

#### 3.3 성능 최종 테스트

**작업 내용**:
- Lighthouse 측정 (Performance 80+ 목표)
- Web Vitals 확인
- 이미지 로딩 성능 확인
- 번들 크기 확인

**완료 기준**:
- [ ] Lighthouse Performance 80+ 달성
- [ ] Web Vitals 임계값 이내
- [ ] 이미지 최적화 정상 동작
- [ ] 번들 크기 최적화 확인

**예상 소요 시간**: 1시간

---

## 구현 순서

1. **SEO 및 성능 최적화** (Week 1)
   - 404 페이지 업데이트
   - 동적 Sitemap 업데이트
   - 성능 최적화 완료

2. **접근성 기능 구현** (Week 2)
   - 접근성 도구 모음 컴포넌트
   - 화면 확대/축소 기능
   - 음성 출력 기능
   - 통합 및 테스트

3. **디자인 최종 점검** (Week 3)
   - 디자인 일관성 점검
   - 접근성 테스트
   - 성능 최종 테스트

---

## 주의사항

### TourAPI 이미지 도메인

- TourAPI 이미지 URL 구조를 먼저 확인해야 함
- 실제 이미지 도메인은 API 응답에서 확인 후 `next.config.ts`에 추가
- 여러 도메인이 있을 수 있으므로 패턴 매칭 고려

### Sitemap 크기 제한

- Sitemap은 최대 50,000 URLs 권장
- 여행지가 많을 경우 Sitemap 인덱스 파일 고려
- 또는 주요 여행지만 포함하는 전략 고려

### 접근성 기능 브라우저 호환성

- Web Speech API는 일부 브라우저에서 미지원 가능
- 폴백 처리 필수
- 화면 확대는 CSS `transform: scale()` 사용 권장 (더 넓은 호환성)

### 성능 최적화

- 이미지 최적화는 프로덕션 빌드에서만 적용됨
- 개발 환경에서는 원본 이미지 사용 가능
- 실제 성능 측정은 프로덕션 환경에서 진행

---

## 완료 기준

Phase 4가 완료되려면 다음 조건을 모두 만족해야 합니다:

1. ✅ 404 페이지가 여행 테마로 업데이트됨
2. ✅ 동적 Sitemap이 TourAPI를 사용하여 생성됨
3. ✅ TourAPI 이미지 도메인이 `next.config.ts`에 추가됨
4. ✅ 접근성 도구 모음이 구현되고 모든 페이지에서 사용 가능함
5. ✅ 화면 확대/축소 기능이 정상 동작함
6. ✅ 음성 출력 기능이 정상 동작함 (Web Speech API 지원 브라우저)
7. ✅ 디자인 일관성이 확인됨
8. ✅ 접근성 테스트 통과 (WCAG 2.1 AA)
9. ✅ Lighthouse Performance 80+ 달성

---

## 다음 단계

Phase 4 완료 후:
- Phase 5: 배포·운영·사업성 검증으로 진행
- 또는 추가 UI/UX 개선 작업 진행

---

## 참고 문서

- [접근성 기능 구현 계획서](./ACCESSIBILITY_FEATURES_PLAN.md)
- [Lighthouse 측정 가이드](./LIGHTHOUSE_CHECKLIST.md)
- [성능 최적화 가이드](./Design.md#9-성능-최적화)
- [TourAPI 공식 문서](https://www.data.go.kr/tcs/dss/selectApiDataDetailView.do?publicDataPk=15128892)
