# Phase 2 개발 계획: 핵심 기능 MVP 개발

## 개요

Phase 2는 Pitch Camping 서비스의 핵심 기능인 캠핑장 목록, 지도 연동, 검색, 상세페이지를 구현하는 단계입니다. 사용자가 실제로 사용할 수 있는 MVP 기능을 완성합니다.

## 목표

- 캠핑장 목록 및 필터링 기능
- 네이버 지도 연동 및 마커 표시
- 키워드 검색 기능
- 상세페이지 및 북마크 기능

## 작업 항목

### 2.1 캠핑장 목록 기능

#### 2.1.1 필터 컴포넌트

**파일**: `components/camping-filters.tsx`

**구현 내용**:
- 지역 필터 (시/도 선택)
- 캠핑 타입 필터 (일반야영장, 자동차야영장, 글램핑, 카라반)
- 시설 필터 (체크박스, 다중 선택)
- 정렬 옵션 (이름순, 지역순, 인기순)

**기술 사항**:
- shadcn/ui Select 컴포넌트 사용
- URL 쿼리 파라미터 연동
- 필터 변경 시 상위 컴포넌트에 콜백 전달

#### 2.1.2 캠핑장 카드 컴포넌트

**파일**: `components/camping-card.tsx`

**표시 항목**:
- 썸네일 이미지 (Next.js Image 컴포넌트)
- 캠핑장명
- 주소
- 캠핑 타입 뱃지
- 시설 아이콘 (화장실, 샤워장, 전기, 와이파이 등)
- 전화번호 (있는 경우)

**인터랙션**:
- 클릭 시 상세페이지 이동
- 호버 효과
- 반응형 디자인 (모바일/태블릿/데스크톱)

#### 2.1.3 캠핑장 목록 컴포넌트

**파일**: `components/camping-list.tsx`

**기능**:
- 필터 기반 캠핑장 목록 조회
- 그리드 레이아웃 (반응형)
- 로딩 상태 (Skeleton UI)
- 에러 처리
- 빈 결과 처리
- 페이지네이션

**API 연동**:
- `campingApi.getCampingList(filter)` 호출
- 응답 데이터 정규화
- 총 개수 표시

#### 2.1.4 홈페이지 통합

**파일**: `app/page.tsx`

**레이아웃**:
- 필터 사이드바 (좌측)
- 캠핑장 목록 (중앙)
- 지도 (우측, 데스크톱)
- 모바일: 탭으로 전환

**상태 관리**:
- URL 쿼리 파라미터 기반 필터 상태
- 필터 변경 시 URL 업데이트

### 2.2 네이버 지도 연동

#### 2.2.1 네이버 지도 컴포넌트

**파일**: `components/naver-map.tsx`

**구현 내용**:
- Naver Maps JavaScript API v3 (NCP) 동적 로드
- 지도 초기화 및 표시
- 캠핑장 마커 표시
- 마커 클릭 시 인포윈도우 표시

**좌표 처리**:
- KATEC → WGS84 좌표 변환
- `convertKATECToWGS84()` 함수 사용

**인포윈도우**:
- 캠핑장명
- 간단한 설명
- 주소
- "상세보기" 버튼

#### 2.2.2 리스트-지도 연동

**파일**: `app/page.tsx`, `components/camping-card.tsx`

**기능**:
- 카드 클릭 시 해당 마커로 지도 이동
- 마커 클릭 시 인포윈도우 표시
- 선택된 캠핑장 강조

**반응형**:
- 데스크톱: 좌우 분할 레이아웃
- 모바일: 탭 전환 (목록/지도)

### 2.3 키워드 검색 기능

#### 2.3.1 검색 컴포넌트

**파일**: `components/camping-search.tsx`

**기능**:
- 검색창 입력
- 엔터 키 또는 검색 버튼으로 검색 실행
- 검색어 초기화 버튼

**UX**:
- 검색 아이콘 표시
- 로딩 상태 표시 (검색 중)
- 검색어 하이라이트 (선택적)

#### 2.3.2 검색 기능 통합

**파일**: `app/page.tsx`

**동작**:
- 검색어를 필터에 추가
- 필터와 검색 조합 가능
- URL 쿼리 파라미터에 검색어 포함

**API 연동**:
- `campingApi.searchCamping(keyword, filter)` 호출

### 2.4 상세페이지

#### 2.4.1 기본 구조

**파일**: `app/campings/[contentId]/page.tsx`

**구현 내용**:
- 동적 라우팅 (`[contentId]`)
- 고캠핑 API 상세 정보 조회
- 뒤로가기 버튼
- 섹션별 컴포넌트 구성

**동적 메타데이터**:
- `generateMetadata()` 함수 구현
- Open Graph 메타데이터 동적 생성
- Twitter 카드 메타데이터

#### 2.4.2 이미지 갤러리

**파일**: `components/camping-detail/detail-gallery.tsx`

**기능**:
- 대표 이미지 표시
- 서브 이미지 썸네일 (있는 경우)
- 이미지 클릭 시 전체화면 모달
- 이미지 슬라이드 기능 (이전/다음 버튼)
- 이미지 인덱스 표시

**기술**:
- shadcn/ui Dialog 컴포넌트 사용
- 키보드 네비게이션 (선택적)

#### 2.4.3 공유 버튼

**파일**: `components/camping-detail/share-button.tsx`

**기능**:
- URL 클립보드 복사
- 복사 완료 상태 표시 (체크 아이콘)
- Sonner Toast 알림

**폴백**:
- 클립보드 복사 실패 시 prompt 창 표시

#### 2.4.4 북마크 버튼

**파일**: `components/camping-detail/bookmark-button.tsx`

**기능**:
- 북마크 추가/제거 토글
- 인증된 사용자: Supabase 저장
- 비인증 사용자: localStorage 저장
- 북마크 상태 표시 (별 아이콘)

**인증 처리**:
- Clerk `useAuth()` 훅 사용
- Supabase 사용자 ID 조회
- 에러 처리 및 폴백

#### 2.4.5 기본 정보 표시

**파일**: `app/campings/[contentId]/page.tsx`

**표시 항목**:
- 캠핑장명
- 대표 이미지
- 주소
- 전화번호 (클릭 시 전화 연결)
- 홈페이지 (링크)
- 소개 내용
- 시설 정보

### 2.5 공통 개선 사항

#### 2.5.1 에러 처리

- API 호출 실패 시 재시도 버튼
- 네트워크 오류 시 안내 메시지
- 404 페이지 처리

#### 2.5.2 로딩 상태

- Skeleton UI (목록)
- 스피너 (지도)
- 로딩 메시지

#### 2.5.3 접근성

- ARIA 라벨 추가
- 키보드 네비게이션 지원
- 이미지 alt 텍스트

## 완료 기준

- [x] 캠핑장 목록 및 필터링 정상 동작
- [x] 네이버 지도 표시 및 마커 정상 동작
- [x] 검색 기능 정상 동작
- [x] 상세페이지 모든 섹션 표시
- [x] 북마크 기능 정상 동작
- [x] 반응형 디자인 적용
- [x] 에러 처리 완료

## 성능 요구사항

- 페이지 로드 시간 < 3초
- API 응답 성공률 > 95%
- 이미지 최적화 (Next.js Image 컴포넌트)

## 다음 단계

Phase 3로 진행하여 운영 및 확장 기능 구현.

